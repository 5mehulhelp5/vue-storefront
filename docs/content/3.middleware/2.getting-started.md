# Getting Started

## Configuration

Usually, Vue Storefront application comes with the `middleware.config.js` file located at the project's root. This is where you can register packages that extend the Server Middleware by adding new API endpoints or modifying the Express.js application itself.

```javascript
// middleware.config.js
export const integrations = {

}
```

Every integration you register inside of this file must have a unique key provided in the installation guide of said extension. That key is used for communication with the middleware, so changing it might cause the integration to break.

Registered integrations should have a configuration matching the [Integration interface](https://docs.vuestorefront.io/v2/reference/api/core.integration.html).

```javascript
// middleware.config.js
export const integrations = {
    magento: {
      location: '',
      extensions: (baseExtensions) => [
        ...baseExtensions,
        // other extensions
      ],
      configuration: {},
      customQueries: {}
    }
}
```

## Running the server middleware

Running the server middleware requires the `@vue-storefront/middleware` package. It exposes `createServer` function, that uses the `integrations` defined in your configuration to initialize a server.
```javascript
// middleware.js

import { createServer } from "@vue-storefront/middleware";
import { integrations } from "./middleware.config.js";

(async () => {
  const app = await createServer({ integrations });

  app.listen(8181, () => {
    console.log('Middleware started');
  });
})();
```

By default in Vue Storefront applications, server middleware is running on port `8181`.
